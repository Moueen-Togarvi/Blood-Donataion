<div class="donor-grid">
    {% for donor in donors %}
    <div class="card" style="margin-bottom:0;position:relative;padding:2.2rem;">
        <span class="badge badge--green"
            style="position:absolute;top:1.5rem;right:1.5rem;font-size:1.1rem;border:1px solid rgba(16,185,129,0.2);font-weight:700;">Verified
            Donor</span>
        <div class="request-card" style="align-items:flex-start;gap:1.5rem;flex-direction:column;">
            <div style="display:flex;gap:1.5rem;width:100%;">
                <div class="blood-drop"
                    style="width:5.5rem;height:5.5rem;font-size:2rem;border:3px solid var(--color-primary);background:white;">
                    {{donor.blood_group}}</div>
                <div style="flex:1;">
                    <div style="margin-bottom:0.5rem;">
                        <span
                            style="font-size:1.2rem;color:var(--color-text-muted);display:block;font-weight:600;text-transform:uppercase;">Name:</span>
                        <h3 class="card__title"
                            style="font-size:2rem;margin:0;color:var(--color-text-main);font-weight:800;">
                            {{donor.name|default:donor.username}}</h3>
                    </div>
                </div>
            </div>
            <div style="width:100%;">
                <div class="card__meta" style="margin-bottom:1.8rem;display:grid;gap:1.2rem;">
                    <div
                        style="display:flex;align-items:flex-start;gap:1rem;font-size:1.4rem;color:var(--color-text-main);">
                        <div
                            style="background:#FEF2F2;padding:6px;border-radius:8px;color:var(--color-primary);margin-top:2px;">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path
                                    d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z" />
                            </svg>
                        </div>
                        <div>
                            <span style="font-weight:800;display:block;line-height:1.2;">
                                {% if donor.hospital_distance %}{{ donor.hospital_distance }}{% else %}Near DHQ
                                Hospital{% endif %}
                            </span>
                            <span style="color:var(--color-text-muted);font-size:1.1rem;">Distance from DHQ
                                Hospital</span>
                        </div>
                    </div>
                    <div
                        style="display:flex;align-items:center;gap:1rem;font-size:1.4rem;color:var(--color-text-main);">
                        <div style="background:#EFF6FF;padding:6px;border-radius:8px;color:var(--color-secondary);">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path
                                    d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z" />
                            </svg>
                        </div>
                        <span style="font-weight:800;">{{donor.city}}</span>
                    </div>
                </div>
                <div style="display:flex;flex-direction:column;gap:1rem;">
                    {% if donor.phone_number %}
                    <a href="tel:{{donor.phone_number}}" class="btn btn--primary"
                        style="width:100%;justify-content:center;font-weight:800;border-radius:5rem;font-size:1.5rem;padding:1.2rem;">Call
                        Now</a>
                    <div style="display:flex;gap:0.8rem;width:100%;">
                        <button onclick="copyToClipboard('{{donor.phone_number}}')" class="btn"
                            style="flex:1;justify-content:center;border-radius:1rem;background:#F8FAFC;border:2px solid#E2E8F0;color:var(--color-text-main);font-weight:700;padding:1rem 0.5rem;font-size:1.3rem;">
                            <span style="color:var(--color-primary);margin-right:8px;">ðŸ“ž</span>
                            <span>{{donor.phone_number}}</span>
                        </button>
                        {% if donor.phone_number_2 %}
                        <button onclick="copyToClipboard('{{donor.phone_number_2}}')" class="btn"
                            style="flex:1;justify-content:center;border-radius:1rem;background:#F8FAFC;border:2px dashed#CBD5E1;color:var(--color-text-main);font-weight:700;padding:1rem 0.5rem;font-size:1.3rem;">
                            <span style="color:var(--color-secondary);margin-right:8px;">ðŸ“ž</span>
                            <span>{{donor.phone_number_2}}</span>
                        </button>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% empty %}
    <div style="text-align:center;padding:8rem 4rem;grid-column:1 / -1;">
        <p>No donors found.</p>
    </div>
    {% endfor %}
</div>
<script>
    function copyToClipboard(text) { if (!navigator.clipboard) { var textArea = document.createElement("textarea"); textArea.value = text; textArea.style.position = "fixed"; document.body.appendChild(textArea); textArea.focus(); textArea.select(); try { document.execCommand('copy'); alert('Copied: ' + text); } catch (err) { } document.body.removeChild(textArea); return; } navigator.clipboard.writeText(text).then(function () { alert('Copied: ' + text); }); }
</script>